<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ergebnisse</title>
    <style>
        body {
            background-color: #1a1e24;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        h1 {
            font-size: 2.5rem;
            margin-top: 20px;
            color: #fff;
        }

        table {
            width: auto;
            border-collapse: collapse;
            margin-top: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px 20px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #007bff;
            color: white;
        }

        td {
            font-size: 1rem;
        }

        .correct-first {
            background-color: #4caf50; /* Grün für erste korrekte Runde */
            color: white;
        }

        .second-round {
            background-color: #f44336; /* Rot für zweite Runde */
            color: white;
        }

        .correct-second {
            background-color: #ff9800; /* Orange nur für bestimmte Modi */
            color: white;
        }

        .container {
            background-color: #fff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.3);
            max-width: 600px;
            text-align: center;
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <a href="index.html"><h1>VocabFlash</h1></a>
    <div class="container">
        <h2>Results</h2>
    </div>
    
    <table id="vocabResultsTable">
        <thead id="tableHeader"></thead>
        <tbody id="resultsContainer"></tbody>
    </table>

    <div class="container">
        <label for="resultDropdown">Wählen Sie den Ergebnis-Typ:</label>
        <select id="resultDropdown" aria-label="Ergebnistyp wählen" onchange="updateResults()">
            <option value="practise">Flashcards üben</option>
            <option value="verbForms">Verben</option>
            <option value="vocaBlanks">Lücken</option>
            <option value="vocaInput">Rechtschreibung</option>
        </select>

        <br><br>
        <a href="index.html">Zurück zur Startseite</a>
    </div>

    <script>
    // Funktion zum Abrufen von Ergebnissen aus dem lokalen Speicher
    function getFromLocalStorage(key) {
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : [];
    }

    const resultsContainer = document.getElementById('resultsContainer');
    const tableHeader = document.getElementById('tableHeader');
    const dropdown = document.getElementById('resultDropdown');

    function loadResults() {
        resultsContainer.innerHTML = "";
        const selectedType = dropdown.value;
        let loadedResults = [];
        let headerHTML = '';

        switch (selectedType) {
            case 'practise':
                loadedResults = getFromLocalStorage("flashcardResults");
                headerHTML = `
                    <tr>
                        <th>Deutsch</th>
                        <th>Fremdsprache</th>
                        <th>1. Runde</th>
                        <th>2. Runde</th>
                    </tr>
                `;
                break;
            case 'verbForms':
                loadedResults = getFromLocalStorage("verbFormResults");
                headerHTML = `
                    <tr>
                        <th>Verb</th>
                        <th>Pronoun</th>
                        <th>1. Runde</th>
                        <th>2. Runde</th>
                    </tr>
                `;
                break;
            case 'vocaBlanks':
            case 'vocaInput':
                loadedResults = getFromLocalStorage(selectedType === 'vocaBlanks' ? "vocaBlanksResults" : "vocaInputResults");
                headerHTML = `
                    <tr>
                        <th>Deutsch</th>
                        <th>Fremdsprache</th>
                        <th>1. Runde</th>
                        <th>2. Runde</th>
                    </tr>
                `;
                break;
        }

        if (loadedResults.length === 0) {
            resultsContainer.innerHTML = "<tr><td colspan='4'>Keine Ergebnisse verfügbar.</td></tr>";
            return;
        }

        tableHeader.innerHTML = headerHTML;
        loadedResults.forEach(result => {
            const row = createResultRow(result.word, result.translation || result.pronoun, result.firstRound, result.secondRound);
            resultsContainer.appendChild(row);
        });
    }

    function createResultRow(word, translation, firstRoundStatus, secondRoundStatus) {
        const row = document.createElement('tr');
        
        const wordCell = document.createElement('td');
        wordCell.innerText = word;
        row.appendChild(wordCell);

        const translationCell = document.createElement('td');
        translationCell.innerText = translation;
        row.appendChild(translationCell);

        const firstRoundCell = document.createElement('td');
        firstRoundCell.innerText = firstRoundStatus.replace("-", " ");
        firstRoundCell.classList.add(firstRoundStatus === 'correct-first' ? 'correct-first' : 'second-round');
        row.appendChild(firstRoundCell);

        const secondRoundCell = document.createElement('td');
        secondRoundCell.innerText = secondRoundStatus.replace("-", " ");
        secondRoundCell.classList.add(secondRoundStatus === 'correct-second' ? 'correct-second' : 'second-round');
        row.appendChild(secondRoundCell);

        return row;
    }

    window.onload = loadResults;
    function updateResults() {
        loadResults();
    }
    </script>
</body>
</html>
