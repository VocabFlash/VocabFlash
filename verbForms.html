<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VerbForms - VocabFlash</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="data/verbForms.js" defer></script>
</head>
<body>

<h1>VocabFlash</h1>
<h2 id="inputCounter">Verb: 1 / 10</h2>

<div class="container">
    <h3 id="selectedVerb">Selected Verb: </h3>
    <table id="conjugationTable">
        <thead>
            <tr>
                <th>Pronoun</th>
                <th>Your Answer</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>je</td>
                <td><input type="text" id="inputJe"></td>
            </tr>
            <tr>
                <td>tu</td>
                <td><input type="text" id="inputTu"></td>
            </tr>
            <tr>
                <td>il/elle</td>
                <td><input type="text" id="inputIlElle"></td>
            </tr>
            <tr>
                <td>nous</td>
                <td><input type="text" id="inputNous"></td>
            </tr>
            <tr>
                <td>vous</td>
                <td><input type="text" id="inputVous"></td>
            </tr>
            <tr>
                <td>ils/elles</td>
                <td><input type="text" id="inputIlsElles"></td>
            </tr>
        </tbody>
    </table>
    
    <button id="submitConjugation" onclick="checkAnswers()">Submit Answers</button>
    <div id="feedback"></div>
</div>

<div class="container">
    <label for="setSelect">Choose a verb set:</label>
    <select id="setSelect" onchange="updateVerbSet()">
        <option value="reg1">er-Verbs</option>
        <option value="cerVerbs">cer-Verbs</option>
        <option value="gerVerbs">ger-Verbs</option>
        <option value="doublVerbs">doubl-Verbs</option>
        <option value="irreguler">Irregular Verbs</option>
    </select>

    <label for="tenseSelect">Choose a tense:</label>
    <select id="tenseSelect">
        <option value="present">Present</option>
        <option value="passeCompose">Passé Composé</option>
        <option value="imparfait">Imparfait</option>
        <option value="mixed">Mixed</option>
    </select>
    
    <button class="confirm-button" onclick="loadVerbForConjugation()">Confirm</button>
</div>

<script>
    let currentVerb;

    function loadVerbForConjugation() {
        const selectedSet = document.getElementById('setSelect').value;
        const selectedTense = document.getElementById('tenseSelect').value;
        const verbs = verbSets[selectedSet];

        if (!verbs) {
            alert("Verb set not found!");
            return;
        }

        const randomIndex = Math.floor(Math.random() * verbs.length);
        currentVerb = verbs[randomIndex];

        document.getElementById('selectedVerb').innerText = `Selected Verb: ${currentVerb.verb}`;

        // Reset inputs
        ['Je', 'Tu', 'IlElle', 'Nous', 'Vous', 'IlsElles'].forEach(pronoun => {
            document.getElementById(`input${pronoun}`).value = '';
        });
    }

    function checkAnswers() {
        const selectedTense = document.getElementById('tenseSelect').value;

        const correctAnswers = {
            je: conjugate(currentVerb, selectedTense, 'je'),
            tu: conjugate(currentVerb, selectedTense, 'tu'),
            ilElle: conjugate(currentVerb, selectedTense, 'il'),
            nous: conjugate(currentVerb, selectedTense, 'nous'),
            vous: conjugate(currentVerb, selectedTense, 'vous'),
            ilsElles: conjugate(currentVerb, selectedTense, 'ils')
        };

        let feedback = '';
        for (const pronoun in correctAnswers) {
            const userAnswer = document.getElementById(`input${pronoun.charAt(0).toUpperCase() + pronoun.slice(1)}`).value.trim();
            if (userAnswer === correctAnswers[pronoun]) {
                feedback += `${pronoun}: Correct!<br>`;
            } else {
                feedback += `${pronoun}: Wrong! Correct answer: ${correctAnswers[pronoun]}<br>`;
            }
        }

        document.getElementById('feedback').innerHTML = feedback;
    }
</script>

</body>
</html>
